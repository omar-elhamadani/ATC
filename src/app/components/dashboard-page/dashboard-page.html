<div class="mt-30 flex flex-col items-center">
  <h1 class="primary-color bona-nova-bold text-5xl text-center mb-8">Explore All Products Here</h1>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div>
      <label for="search" class="block mb-2 font-medium">Search Products</label>
      <input
        id="search"
        type="text"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg"
        placeholder="Search (sku, name, slug)"
        (change)="this.page = 1; loadProducts()"
        [(ngModel)]="q"
      />
    </div>

    <div>
      <label for="perPage" class="block mb-2 font-medium">Products Per Page</label>
      <select
        id="perPage"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg"
        (change)="this.page = 1; loadProducts()"
        [(ngModel)]="perPage"
      >
        <option *ngFor="let n of [10, 15, 25, 50]" [value]="n">{{ n }}</option>
      </select>
    </div>

    <div class="flex items-center mt-6">
      <input
        id="active"
        type="checkbox"
        class="mr-2"
        (change)="this.page = 1; loadProducts()"
        [(ngModel)]="is_active"
      />
      <label for="active" class="font-medium">Show only available products</label>
    </div>
    <div class="flex items-center mt-6">
      <button
        class="bg-black px-6 py-2 text-white rounded-lg hover:bg-yellow-600 cursor-pointer transition duration-200"
        (click)="toCreate()"
      >
        Create product
      </button>
    </div>
    <div class="flex items-center mt-6">
      <h4>
        <span class="text-yellow-600">{{ total }}</span> results
      </h4>
    </div>
    <div class="flex items-center mt-6">
      <button
        class="px-4 py-2 mx-5 text-sm rounded-md bg-black text-white hover:bg-yellow-600 cursor-pointer transition duration-200"
        (click)="prev()"
        [disabled]="page <= 1"
      >
        Prev
      </button>
      <div>Page {{ page }} / {{ lastPage }}</div>
      <button
        class="px-4 py-2 mx-5 text-sm rounded-md bg-black text-white hover:bg-yellow-600 cursor-pointer transition duration-200"
        (click)="next()"
        [disabled]="page >= lastPage"
      >
        Next
      </button>
    </div>
  </div>

  <div
    class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10 w-11/12 justify-center my-10"
  >
    <app-card
      *ngFor="let product of products"
      [product]="product"
      (click)="open(product.id)"
    ></app-card>
  </div>
  <div class="flex items-center mb-7" style="margin-top: 8px">
    <button
      class="px-4 py-2 mx-5 text-sm rounded-md bg-black text-white hover:bg-yellow-600 cursor-pointer transition duration-200"
      (click)="prev()"
      [disabled]="page <= 1"
    >
      Prev
    </button>
    <div>Page {{ page }} / {{ lastPage }}</div>
    <button
      class="px-4 py-2 mx-5 text-sm rounded-md bg-black text-white hover:bg-yellow-600 cursor-pointer transition duration-200"
      (click)="next()"
      [disabled]="page >= lastPage"
    >
      Next
    </button>
  </div>
  <div *ngIf="products.length === 0" class="mt-16 text-center">
    <svg
      class="mx-auto h-24 w-24 text-gray-400"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
    <h3 class="mt-4 text-2xl font-semibold text-gray-900">No Products found</h3>
    <p class="mt-2 text-gray-600">Try adjusting your filters to find what you're looking for.</p>
  </div>
</div>
